# project_name=podcloud-rss
version: "3"
services:
  rss: # scale=5
    image: podshows/podcloud-rss:latest
    networks:
      - traefik
      - podcloud
    volumes:
      - ./config:/usr/src/app/config
    restart: always
    labels:
      traefik.enable: true
      traefik.backend: "podcloud-rss"
      traefik.frontend.rule: "HostRegexp:{subdomain:.*}{host:podcloud|lepodcast}.fr;Path:/rss"
      traefik.frontend.priority: 900

  rss-feed-cache:
    image: redis
    command: ["redis-server", "--maxmemory 4gb", "--maxmemory-policy allkeys-lfu"]
    restart: always
    networks:
      - traefik
      - podcloud
      - default

  rss-ping-cache:
    image: redis
    command: ["redis-server", "--maxmemory 4gb", "--maxmemory-policy allkeys-lru"]
    restart: always
    networks:
      - traefik
      - podcloud
      - default

networks:
  podcloud:
    external: true
  traefik:
    external: true
